<template>
  <div id="root">
    <header>
      <div class="logo">
        <NuxtLink to="/">
          <svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" viewBox="761.22 430 397.59 220.02"
            style="width: 100px">
            <switch>
              <foreignObject requiredExtensions="http://ns.adobe.com/AdobeIllustrator/10.0/" x="0" y="0" width="1"
                height="1" />
              <g>
                <path
                  d="M828.2 466.79h-23.76l-3.21-16.5c-.53-2.75-2.23-4.12-5.09-4.12h-6.76c-2.97 0-4.19 1.38-3.65 4.12l12.51 64.35c.3 1.54.84 2.61 1.62 3.22s1.99.91 3.64.91h6.77c1.54 0 2.58-.3 3.12-.91.54-.6.67-1.68.37-3.22l-3.11-16h23.76l3.53 18.15q3.525 18.15-17.43 18.15h-21.12c-13.86 0-21.97-6.05-24.32-18.15l-13.34-68.64c-2.35-12.1 3.4-18.15 17.26-18.15h21.12q20.955 0 24.48 18.15zM850.77 430h22.11c13.86 0 21.97 6.05 24.32 18.15l13.31 68.47c2.37 12.21-3.37 18.31-17.23 18.31h-22.11c-13.97 0-22.14-6.1-24.52-18.31l-13.31-68.47Q829.815 430 850.77 430m35.53 83.49-12.06-62.04c-.53-2.75-2.23-4.13-5.09-4.13h-7.92c-2.97 0-4.19 1.38-3.65 4.13l12.06 62.04c.54 2.75 2.29 4.13 5.26 4.13h7.92c2.85-.01 4.01-1.38 3.48-4.13M904.21 430h43.72q20.955 0 24.48 18.15l13.31 68.47c2.37 12.21-3.43 18.31-17.4 18.31H924.6zm57.54 84.64-12.51-64.35c-.53-2.75-2.29-4.12-5.26-4.12h-13.03l14.11 72.6h13.03c2.97 0 4.19-1.38 3.66-4.13m57.79 2.97h33.66l3.37 17.32h-57.25L978.92 430h55.93l3.37 17.32h-32.34l4.97 25.57h27.56l3.37 17.32h-27.55zm-91.64 95.15a.794.794 0 0 0-.78-.64h-23.76c-.24 0-.46.11-.61.29s-.21.42-.17.65l3.11 16c.24 1.24.18 2.14-.18 2.54-.26.29-.92.64-2.53.64h-6.77c-1.46 0-2.52-.25-3.16-.74-.62-.48-1.06-1.4-1.32-2.74l-12.51-64.35c-.21-1.09-.11-1.89.29-2.38.44-.53 1.31-.81 2.58-.81h6.76c2.48 0 3.85 1.11 4.32 3.48l3.21 16.5c.07.37.4.64.78.64h23.76c.24 0 .46-.11.61-.29s.21-.42.17-.65l-3.62-18.64c-2.42-12.47-10.92-18.79-25.26-18.79H871.7c-7.55 0-12.87 1.81-15.8 5.37-2.63 3.19-3.38 7.81-2.23 13.72l13.34 68.64c2.42 12.47 10.87 18.79 25.09 18.79h21.12c7.63 0 13.01-1.82 15.97-5.41 2.63-3.19 3.38-7.79 2.24-13.68zm.07 30.82c-2.64 3.21-7.61 4.83-14.74 4.83h-21.12c-13.55 0-21.25-5.73-23.54-17.51l-13.34-68.64c-1.05-5.43-.41-9.6 1.9-12.41 2.62-3.18 7.53-4.8 14.58-4.8h21.12c13.66 0 21.42 5.73 23.71 17.51l3.44 17.7h-22.15l-3.08-15.86c-.61-3.12-2.64-4.76-5.87-4.76h-6.76c-1.77 0-3.05.46-3.8 1.38-.72.87-.93 2.11-.63 3.69l12.51 64.35c.34 1.73.98 2.97 1.91 3.69s2.28 1.07 4.13 1.07h6.77c1.79 0 3.01-.38 3.71-1.17.73-.81.91-2.08.55-3.9l-2.93-15.06h22.15l3.4 17.51c1.04 5.41.4 9.58-1.92 12.38m69.75-12.49h-29.54l-16.91-86.97a.794.794 0 0 0-.78-.64h-23.43c-.24 0-.46.11-.61.29s-.21.42-.17.65l20.4 104.94c.07.37.4.64.78.64h53.62c.24 0 .46-.11.61-.29s.21-.42.17-.65l-3.37-17.32a.79.79 0 0 0-.77-.65m-49.61 17.33-20.09-103.36h21.82l16.91 86.97c.07.37.4.64.78.64h29.54l3.06 15.74h-52.02zm92.06-104.46a.79.79 0 0 0-.73-.48h-30.03c-.43 0-.78.34-.79.77l-3.36 104.94c-.01.21.07.42.22.58.15.15.35.24.57.24h23.26a.787.787 0 0 0 .79-.79l-.06-18.18h22.59l7.12 18.47c.12.3.41.51.74.51h23.76c.27 0 .51-.13.66-.36.15-.22.17-.5.07-.75zm20.87 104.46-7.12-18.47a.8.8 0 0 0-.74-.51h-23.92a.787.787 0 0 0-.79.79l.06 18.18h-21.65l3.31-103.36h28.74l44.14 103.36h-22.03zm-30.96-80.51c-.37.07-.65.4-.64.78l.05 44.38c0 .44.35.79.79.79h17.16c.26 0 .51-.13.65-.34.15-.22.18-.49.08-.73l-17.21-44.38a.8.8 0 0 0-.88-.5m16.2 44.37h-15.22l-.04-39.36zm92.11-68.16a.794.794 0 0 0-.78-.64H1116c-.24 0-.46.11-.61.29s-.21.42-.17.65l11.24 57.81-32.37-58.34a.79.79 0 0 0-.69-.41h-21.29c-.24 0-.46.11-.61.29s-.21.42-.17.65l20.4 104.94c.07.37.4.64.78.64h21.45c.24 0 .46-.11.61-.29s.21-.42.17-.65l-11.28-58.02 32.75 58.56c.14.25.4.4.69.4h21.12c.24 0 .46-.11.61-.29s.21-.42.17-.65zm-1.04 104.3-34.93-62.46a.795.795 0 0 0-.96-.36c-.36.13-.58.51-.5.89l12.04 61.92h-19.84l-20.09-103.36h19.86l34.57 62.29c.19.34.6.49.96.36s.58-.51.51-.89l-12-61.76h20l20.09 103.36h-19.71zm-206.4-202.25"
                  style="fill: #fff" />
                <g />
                <g />
                <g />
                <g />
                <g />
                <g />
                <g />
                <g />
                <g />
                <g />
                <g />
              </g>
            </switch>
          </svg>
        </NuxtLink>
      </div>
      <div class="darkmode-switch">
        <a-switch v-model:checked="isDarkMode">
          <template #checkedChildren>
            <svg viewBox="-4 -2 24 24" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMinYMin"
              class="jam jam-moon" style="width: 16px !important; padding-top: 3px">
              <path fill="white"
                d="M2 10c0 4.43 3.478 8 7.742 8 .658 0 1.302-.085 1.922-.248-2.996-2.2-4.896-5.786-4.896-9.752 0-2.09.527-4.095 1.489-5.853C4.699 2.863 2 6.097 2 10m6.768-2c0 4.632 3.068 8.528 7.232 9.665A9.56 9.56 0 0 1 9.742 20C4.362 20 0 15.523 0 10S4.362 0 9.742 0c.868 0 1.71.117 2.511.335A10.09 10.09 0 0 0 8.768 8" />
            </svg>
          </template>
          <template #unCheckedChildren>
            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" style="width: 16px !important">
              <path fill="white"
                d="m5.64 17-.71.71a1 1 0 0 0 0 1.41 1 1 0 0 0 1.41 0l.71-.71A1 1 0 0 0 5.64 17M5 12a1 1 0 0 0-1-1H3a1 1 0 0 0 0 2h1a1 1 0 0 0 1-1m7-7a1 1 0 0 0 1-1V3a1 1 0 0 0-2 0v1a1 1 0 0 0 1 1M5.64 7.05a1 1 0 0 0 .7.29 1 1 0 0 0 .71-.29 1 1 0 0 0 0-1.41l-.71-.71a1 1 0 0 0-1.41 1.41Zm12 .29a1 1 0 0 0 .7-.29l.71-.71a1 1 0 1 0-1.41-1.41l-.64.71a1 1 0 0 0 0 1.41 1 1 0 0 0 .66.29ZM21 11h-1a1 1 0 0 0 0 2h1a1 1 0 0 0 0-2m-9 8a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1a1 1 0 0 0-1-1m6.36-2A1 1 0 0 0 17 18.36l.71.71a1 1 0 0 0 1.41 0 1 1 0 0 0 0-1.41ZM12 6.5a5.5 5.5 0 1 0 5.5 5.5A5.51 5.51 0 0 0 12 6.5m0 9a3.5 3.5 0 1 1 3.5-3.5 3.5 3.5 0 0 1-3.5 3.5" />
            </svg>
          </template>
        </a-switch>
      </div>
    </header>
    <a-row class="main" :gutter="16">
      <a-col :xs="24" :lg="isDetailView ? 24 : 18">
        <slot />
      </a-col>
      <a-col v-if="!isDetailView" :xs="24" :lg="6">
        <a-affix :offset-top="16">
          <categories :coursesTree="coursesTree" :filesArray="filesArray" />
        </a-affix>
      </a-col>
    </a-row>
  </div>
</template>

<script setup lang="ts">
import { ref, onMounted, watch } from "vue";
import { useUiOptions } from "~/stores/uiOptions";
import { useContentData } from "~/stores/contentData";

const uiOptions = useUiOptions();
const contentData = useContentData();
const colorMode = useColorMode();

const coursesTree = contentData.coursesTree;
const filesArray = contentData.filesArray;

const isDetailView = ref(uiOptions.isDetailView);
const isDarkMode = ref(uiOptions.isDarkMode);

const initiateIsDarkMode = () => {
  const value = colorMode.value === "dark";
  isDarkMode.value = value;
  uiOptions.setIsDarkMode(value);
};

onMounted(() => {
  initiateIsDarkMode();
});

watch(isDarkMode, (newValue) => {
  colorMode.preference = newValue ? "dark" : "light";
});
</script>

<style lang="scss">
@import url("https://fonts.googleapis.com/css2?family=Work+Sans:ital,wght@0,100..900;1,100..900&display=swap");
</style>
